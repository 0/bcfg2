.. -*- mode: rst -*-

.. _server-admin-index:

=====
Admin
=====

The ``bcfg2-admin`` command provides you an interface which allows you
to interact with your Bcfg2 :term:`repository` in an administrative fashion. To
get started, run ``bcfg2-admin help``. You will be presented with a list
of different *modes* which each provide various administrative
functionality. Available modes are listed below.

backup
======

.. _Sample repository: https://github.com/solj/bcfg2-repo

Create an archive of the whole Bcfg2 :term:`repository`. The archive is stored
directly in your Bcfg2 repository (e.g. /var/lib/bcfg2)::

    bcfg2-admin backup

A backup is recommanded before you start using the `Samples repository`_ of
Bcfg2.


bundle
======

For a list of all available xml bundles use ``list-xml``. ``list-genshi``
will list all available genshi bundles.::

    # bcfg2-admin bundle list-xml
    # bcfg2-admin bundle list-genshi

``show`` provides an interactive dialog to get details about the available
bundles.::

    # bcfg2-admin bundle show
    Available bundles (Number of bundles: 4)
    ----------------------------------------
    [0]	motd.xml
    [1]	snmpd.xml
    [2]	bcfg2.xml
    [3]	ntp.xml
    Enter the line number of a bundle for details: 3
    Details for the "ntp" bundle:
    Package:	xntp
    Path:		/etc/sysconfig/xntp
    Path:		/etc/sysconfig/clock
    Path:		/etc/ntp.conf
    Service:	xntpd


client
======

Create, delete, list, or modify client entries. ::

    bcfg2-admin client add 


With ``list`` the file ``clients.xml`` will 

    # bcfg2-admin client list
    Failed to find IP address for desktop01.example.com
    server01.example.com
    laptop02.example.com

compare
=======

Determine differences between files or directories of client
specification instances.

init
====

Interactively initialize a new repository.

minestruct
==========

Extract extra entry lists from statistics.

perf
====

Query server for performance data.

pull
====

Integrate configuration information from clients into the server
repository.

query
=====

Query clients.

The default result format is suitable for consumption by `pdsh`_.
This example queries the server for all clients in the *ubuntu* group::

    bcfg2-admin query g=ubuntu

.. _pdsh: http://sourceforge.net/projects/pdsh/

snapshots
=========

Interact with the Snapshots system.

tidy
====

Clean up useless files in the repo.

viz
===

Produce graphviz diagrams of metadata structures.

The following command will produce a graphviz image which includes hosts,
bundles, and a key::

    bcfg2-admin viz -H -b -k -o ~/bcfg2.png

.. note:: The graphviz package available via DAG/RPMforge has been known
          to have dependency issues. We recommend installing the package
          from EPEL.

xcmd
====

XML-RPC Command Interface.
