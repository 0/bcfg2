{% load syntax_coloring %}

{% extends "base.html" %}

{% block extra_header_info %}
<link rel="stylesheet" type="text/css" href="/site_media/syntax-coloring.css" />
<script type="text/javascript" src="/site_media/CalendarPopup.js"></script>
<script language="JavaScript">var cal = new CalendarPopup();</script>
{% endblock%}
{% block title %}Configuration Element Details{% endblock %}

{% block pagebanner %}
  <div class="header">
      <h1>Configuration Element Details</h1>
  </div>
  <br/>
{% endblock %}

{% block content %}
{% ifequal mod_or_bad "bad" %}
<div class="bad">
<h2>Bad {{item.kind}}: {{item.name}}</h2>
</div>
{% else %}
<div class="modified">
<h2>Modified {{item.kind}}: {{item.name}}</h2>
</div>
{% endifequal %}
<center>
<table border=1 padding=0 >
<tr><th>Reason</th><th>Current Status</th><th>Specified in BCFG</th></tr>
{% if item.reason.current_owner %}
<tr><td align="right"><b>Owner: </b></td><td>{{item.reason.owner}}</td><td>{{item.reason.current_owner}}</td></tr>
{% endif %}{% if item.reason.current_group %}
<tr><td align="right"><b>Group: </b></td><td>{{item.reason.group}}</td><td>{{item.reason.current_group}}</td></tr>
{% endif %}{% if item.reason.current_perms %}
<tr><td align="right"><b>Permissions: </b></td><td>{{item.reason.perms}}</td><td>{{item.reason.current_perms}}</td></tr>
{% endif %}{% if item.reason.current_status %}
<tr><td align="right"><b>Status: </b></td><td>{{item.reason.status}}</td><td>{{item.reason.current_status}}</td></tr>
{% endif %}{% if item.reason.current_to %}
<tr><td align="right"><b>Link Destination: </b></td><td>{{item.reason.to}}</td><td>{{item.reason.current_to}}</td></tr>
{% endif %}{% if item.reason.current_version %}
<tr><td align="right"><b>Version: </b></td><td>{{item.reason.version}}</td><td>{{item.reason.current_version}}</td></tr>
{% endif %}{% if not item.reason.current_exists %}
<tr><td align="right"><b>Existance: </b></td><td colspan=2>This item does not currently exist on the host but is specified to exist in the configuration.</td></tr>
{% endif %}{% if item.reason.current_diff %}
<tr><td align="right"><b>NDiff: </b></td><td colspan=2><pre>{{item.reason.current_diff|syntaxhilight:"diff"}}</pre></td></tr>
{% endif %}
</table></center>
<hr/>
<div>
<span class="mini-date">
<b>Enter date or use calendar popup: </b>
<form name="timestamp-select">
<input type="text" name="date1" value="{{timestamp_date}}" size=10>@
<input type="text" name="time" value="{{timestamp_time}}" size=8>
<a href="" onClick="cal.select(document.forms['timestamp-select'].date1,'anchor1','yyyy-MM-dd'); return false;"
   name="anchor1" ID="anchor1">Calendar</A>
<input type="button" name="go" value="Go" onClick="location.href='/elements/{{mod_or_bad}}/{{item.id}}/'+document.forms['timestamp-select'].date1.value+'@'+document.forms['timestamp-select'].time.value;" />
 | <input type="button" name="now" value="Now" onClick="location.href='/elements/{{mod_or_bad}}/{{item.id}}';"/>
</form>
</span><br/><br/><br/></div>
{% if associated_client_list %}
    <p>The following clients had this problem as of {{timestamp_date}}@{{timestamp_time}}:</p>
    {% for client in associated_client_list %}
        <a href="/clients/{{client.name}}">{{client.name}}</a><br/>
    {% endfor %}
    <br />
    <br />
{% else %}
    <p>No Clients had this problem at {{timestamp}}</p>
{% endif %}







{% endblock %}
